name: Deploy Workflow

on:
  workflow_call:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: false
        type: string
      aws-env-dir:
        required: true
        type: string
      aws-region:
        required: true
        type: string
      iam-role-arn:
        required: true
        type: string
    # secrets:
    #   GITHUB_TOKEN:
    #     required: true

jobs:
  dev-use1:
    # if: ${{ inputs.environment == 'development' }}
    uses: ./.github/workflows/reusable-wf.yml
    with:
      environment: ${{ inputs.environment }}
      aws-env-dir: ${{ inputs.aws-env-dir }}
      aws-region: ${{ inputs.aws-region }}
      iam-role-arn: ${{ inputs.iam-role-arn }}

  dev-usw2:
    # if: ${{ inputs.environment == 'development' }}
    uses: ./.github/workflows/reusable-wf.yml
    with:
      environment: ${{ inputs.environment }}
      aws-env-dir: ${{ inputs.aws-env-dir }}
      aws-region: ${{ inputs.aws-region }}
      iam-role-arn: ${{ inputs.iam-role-arn }}

  # Production:
  #   # if: ${{ inputs.environment == 'production' }}
  #   needs: dev-use1
  #   uses: ./.github/workflows/reusable-wf.yml
  #   with:
  #     aws-env: prd-use1
  #   # runs-on: ubuntu-latest
  #   # steps:
  #   #   - name: Checkout code
  #   #     uses: actions/checkout@v3
  #   #   - name: Deploy to Production
  #   #     run: echo "Deploying to Production Environment"
